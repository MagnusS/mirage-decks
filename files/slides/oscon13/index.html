<section data-markdown>
  <script type="text/template">
    # Unikernels: Functional Library Operating Systems for the Cloud
	
    ## Anil Madhavapeddy, University of Cambridge 
    ## with a merry crew:
    ## Haris Rotsos, Balraj Singh, Steven Smith Jon Crowcroft, Steve Hand
    (University of Cambridge)

    ## Richard Mortier (University of Nottingham) 
    ## Thomas Gazagnaire (OCamlPro) 
    ## Dave Scott (Citrix Systems R&D)

  </script>
</section>

<section>
  <section data-markdown>
    <script type="text/template">
      ## The Cloud Threat Model

      <img alt="progressive specialisation" src="threat-model-dom0.png">
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## The Cloud Threat Model

      <img alt="progressive specialisation" src="threat-model.png">
   </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## The Cloud Threat Model

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## The Cloud Threat Model

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## The Cloud Threat Model

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Key Design Insights

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Key Design Insights

    </script>
  </section>
</section>

<section>
  <section data-markdown>
    <script type="text/template">
      ## Unikernels!

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Virtual Appliances: Current

      <img alt="progressive specialisation" src="vapps-current.png">
   </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Virtual Appliances: Specialised

      <img alt="progressive specialisation" src="vapps-specialised.png">
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Virtual Appliances: Specialised

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Virtual Appliances: Specialised

    </script>
  </section>
</section>

<section>
  <section data-markdown>
    <script type="text/template">
      ## Microbenchmarks!

      Unikernel appliances are:

      + Smaller, both in kLoC & image size
      + Boot faster, at round-trip time timescales
      + High performance
      + Type-safe

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Appliance Image Size

      <table>
        <thead>
          <td>Appliance</td><td>Standard Build</td><td>Dead Code Elimination</td>
        </thead>
        <tbody>
          <tr>
            <td>DNS</td><td>0.449 MB</td><td>0.184 MB</td>
          </tr>
          <tr>
            <td>Web Server</td><td>0.674 MB</td><td>0.172 MB</td>
          </tr>
          <tr>
            <td>Openflow learning switch</td><td>0.393 MB</td><td>0.164 MB</td>
          </tr>
          <tr>
            <td>Openflow controller</td><td>0.392 MB</td><td>0.168 MB</td>
          </tr>
        </tbody>
      </table>

      All configuration and data compiled into the image by the toolchain.

      Live migration is easy and fun :-)
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Boot Time

      <img alt="progressive specialisation" src="boot-time.png">

      _Unikernels are compact enough to boot and respond to network traffic in
      real-time._
    </script>
  </section>
  
  <section data-markdown>
    <script type="text/template">
      ## How Large is Large?

    </script>
  </section>
  
  <section data-markdown>
    <script type="text/template">
      ## Event Driven Co-Threads

      _Garbage collected heap management is more efficient in a single
      address-space environment. Thread latency can be reduced by eliminating
      multiple levels of scheduling._ 

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Single-instance Thread Scaling

      _Threads are heap allocated values, so benefit from the faster garbage
      collection cycle in the Mirage Xen version, and the scheduler can be
      overridden by application-specific needs._ 

    </script>
  </section>
  
  <section data-markdown>
    <script type="text/template">
      ## Block Storage

    </script>
  </section>

</section>

<section>
 <section data-markdown>
    <script type="text/template">
      ## Techniques

      Several implementation techniques give rise to these benefits. We will
      discuss the first two:

      + Simplified memory management
      + Zero-copy IO buffer management
      + Hypervisor security extension for _VM sealing_ (`W^X`)

    </script>
  </section>
   
  <section data-markdown>
    <script type="text/template">
      ## Simplified Memory Management

      <img alt="progressive specialisation" src="memory-model.png">
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Simplified Memory Management

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Simplified Memory Management

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Simplified Memory Management

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Zero-Copy IO Buffer Management

      <img alt="progressive specialisation" src="zero-copy-io.png">
    </script>
  </section>


  <section data-markdown>
    <script type="text/template">
      ## Optional VM Sealing

      + Single address-space and no dynamic loading
        + `W^X` address space
        + Address offsets are randomized at compile-time
      + Dropping page table privileges:
        + Added freeze hypercall called just before app starts
        + Subsequent page table updates are rejected by Xen
        + Exception for I/O mappings if they are non-exec and do not modify
          any existing mappings 
      
      
      + Very easy in unikernels due to focus on _compile-time specialisation_
        instead of _run-time complexity_
    
    </script>
  </section>


  <section data-markdown>
    <script type="text/template">
      ## Progressive Specialisation

      <img alt="progressive specialisation" src="arch2.png">

    </script>
  </section>

</section>

<section>
 <section data-markdown>
    <script type="text/template">
      ## Macrobenchmarks

      We have implemented several larger appliances. 

      We discuss _deens_, our DNS server in detail here.

      We also have a simple webserver, and an OpenFlow Switch and Controller.

    </script>
  </section>

   <section data-markdown>
    <script type="text/template">
      ## DNS Server Code

      ```
      let main () =
        lwt zones = read key "zones" "zone.db" in 
        Net.Manager.bind (fun mgr dev ->
          let src = `any_addr, 53 in
          Dns.Server.listen dev src zones   
        )
      ```
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## DNS Server Performance

    </script>
  </section>
  
  <section data-markdown>
    <script type="text/template">
      ## Scaling via Parallel Instances

      + Apache/Linux vs. Mirage appliance
      + Serving single static page

    </script>
  </section>
  
  <section data-markdown>
    <script type="text/template">
      ## Openflow Controller performance

      _OpenFlow controller is competitive with NOX (C++), but much higher
      level. Applications can link directly against the switch to route their
      data._ 

    </script>
  </section>
</section>

<section>
  <section data-markdown>
    <script type="text/template">
      ## Summary

      + __OCaml is the baseline language for all new code__
        + C runtime is small, and getting smaller
        + Is fully event-driven and non-preemptive

      + __Rewriting protocols wasn't that hard__
        + Not necessarily the best research strategy though
        + But an extremely useful learning experience
        + Tech transfer is vital

      + __Unikernels fit perfectly on the cloud__
        + Internet protocol building blocks
        + Seamless interop with legacy code through VMs
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Mirage Online

      Pure OCaml code at <http://github.com/mirage/> for: 
      
      + Device drivers (netfront/blkfront/xenstore)
      + TCP/IPv4 and DHCPv4
      + HTTP
      + DNS(SEC)
      + SSH
      + OpenFlow (controller/switch)
      + vchan IPC
      + 9P :-)
      + NFS
      + FAT32
      + Distributed k/v store: arakoon.org
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Mirage Online

      + Online resources:
        + <http://www.openmirage.org>
        + (Code) <http://github.com/mirage>
        + (O'Reilly Book) <http://realworldocaml.org>
      
      + <http://www.cl.cam.ac.uk/projects/ocamllabs>
        + Funded by industry/academia (Jane Street Capital, Citrix, EU FP7,
          RCUK/Horizon)
        + Focus: real world functional programming with OCaml
        + Need compiler hackers, protocol heads, PL/type theory systems. Must
          enjoy open source work!  
    </script>
  </section>

  <section data-markdown>
    <script type="text/template">
      ## Key Research Directions

      + __Interoperability -- with billions of VMs out there__
        + A unikernel per-language?
        + Interconnect strategies? Heap sharing?
        + Formal method integration easier or harder?
      + __Coordination -- planetary scale computers__
        + Resources are highly elastic now.
        + How to coordinate a million microkernels? 
        + "Warehouse Scale Computing"
      + __Library Applications --- where are they?__
        + Irminsule, a git-like functional distributed database
        + Beanstalk, a self-scaling web server
    </script>
  </section>

</section>

<!--

<section data-markdown>
<script type="text/template">
</script>
</section>



<section>
<h2>
Some<br />
stuff
</h2>

<h2 class="fragment absolute-element" style="position: absolute; width: 239px; height: 68px; z-index: 4; left: 379px; top: 372px;" data-fragment-index="0">gdgTitleb</h2>
<div class="absolute-element" style="position: absolute; width: 78px; height: 46px; z-index: 4; left: 689px; top: 241px;">gdfg</div>
</section>
-->
